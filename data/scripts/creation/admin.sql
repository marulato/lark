-- System Admin Table
CREATE TABLE SA_USER
(
    USER_ID            BIGINT PRIMARY KEY AUTO_INCREMENT,
    LOGIN_ID           VARCHAR(32)  NOT NULL UNIQUE,
    USER_NAME          VARCHAR(64),
    PASSWORD           VARCHAR(256) NOT NULL,
    EMAIL              VARCHAR(256) NOT NULL,
    STATUS             CHAR(1)      NOT NULL,
    ACTIVATE_AT        DATE         NOT NULL,
    DEACTIVATE_AT      DATE,
    NEED_CHANGE_PWD    CHAR(1)      NOT NULL,
    PWD_LAST_CHANGE_DT DATETIME,
    LAST_LOGIN_AT      DATETIME,
    FAILED_ATTEMPTS    INT          NOT NULL,
    CREATED_AT         DATETIME     NOT NULL,
    CREATED_BY         VARCHAR(32)  NOT NULL,
    UPDATED_AT         DATETIME     NOT NULL,
    UPDATED_BY         VARCHAR(32)  NOT NULL
);

CREATE TABLE H_SA_USER
(
    AUDIT_ID           BIGINT,
    AUDIT_TYPE         CHAR(2)      NOT NULL,
    AUDIT_TIME         DATETIME     NOT NULL,
    USER_ID            BIGINT,
    LOGIN_ID           VARCHAR(32)  NOT NULL,
    USER_NAME          VARCHAR(64),
    PASSWORD           VARCHAR(256) NOT NULL,
    EMAIL              VARCHAR(256) NOT NULL,
    STATUS             CHAR(1)      NOT NULL,
    ACTIVATE_AT        DATE         NOT NULL,
    DEACTIVATE_AT      DATE,
    NEED_CHANGE_PWD    CHAR(1)      NOT NULL,
    PWD_LAST_CHANGE_DT DATETIME,
    LAST_LOGIN_DT      DATETIME,
    FAILED_ATTEMPTS    INT          NOT NULL,
    CREATED_AT         DATETIME     NOT NULL,
    CREATED_BY         VARCHAR(32)  NOT NULL,
    UPDATED_AT         DATETIME     NOT NULL,
    UPDATED_BY         VARCHAR(32)  NOT NULL
);

CREATE TABLE SA_ROLE
(
    ROLE_ID     VARCHAR(16) PRIMARY KEY,
    ROLE_NAME   VARCHAR(32) NOT NULL,
    DESCRIPTION VARCHAR(256)
);

CREATE TABLE SA_USER_ROLE_ASSIGN
(
    USER_ID    BIGINT,
    ROLE_ID    VARCHAR(16),
    REMARKS    VARCHAR(256),
    CREATED_AT DATETIME    NOT NULL,
    CREATED_BY VARCHAR(32) NOT NULL,
    UPDATED_AT DATETIME    NOT NULL,
    UPDATED_BY VARCHAR(32) NOT NULL,
    PRIMARY KEY (USER_ID, ROLE_ID)
);

CREATE TABLE H_SA_USER_ROLE_ASSIGN
(
    AUDIT_ID   BIGINT,
    AUDIT_TYPE CHAR(2)     NOT NULL,
    AUDIT_TIME DATETIME    NOT NULL,
    USER_ID    BIGINT,
    ROLE_ID    VARCHAR(16),
    REMARKS    VARCHAR(256),
    CREATED_AT DATETIME    NOT NULL,
    CREATED_BY VARCHAR(32) NOT NULL,
    UPDATED_AT DATETIME    NOT NULL,
    UPDATED_BY VARCHAR(32) NOT NULL

);

CREATE TABLE USER_LOGIN_HISTORY
(
    USER_ID          BIGINT      NOT NULL,
    LOGIN_ID         VARCHAR(32) NOT NULL,
    LOGIN_ATTEMPT_AT DATETIME,
    IS_SUCCESSFUL    CHAR(1)     NOT NULL,
    CLIENT           VARCHAR(64),
    IP               VARCHAR(32),
    CREATED_AT       DATETIME    NOT NULL,
    CREATED_BY       VARCHAR(32) NOT NULL,
    UPDATED_AT       DATETIME    NOT NULL,
    UPDATED_BY       VARCHAR(32) NOT NULL,
    INDEX USER_ID_IDX (USER_ID)
);

CREATE TABLE UNKNOWN_LOGIN_HISTORY
(
    USER_NAME        VARCHAR(128) NOT NULL,
    LOGIN_ATTEMPT_AT DATETIME,
    CLIENT           VARCHAR(64),
    IP               VARCHAR(32),
    CREATED_AT       DATETIME     NOT NULL,
    CREATED_BY       VARCHAR(32)  NOT NULL,
    UPDATED_AT       DATETIME     NOT NULL,
    UPDATED_BY       VARCHAR(32)  NOT NULL

);

CREATE TABLE SA_CONFIG
(
    CONFIG_KEY   VARCHAR(128) NOT NULL PRIMARY KEY,
    CONFIG_VALUE VARCHAR(128) NOT NULL,
    DESCRIPTION  VARCHAR(256),
    IS_SYSTEM    CHAR(1) NOT NULL,
    NEED_RESTART CHAR(1)      NOT NULL
);
